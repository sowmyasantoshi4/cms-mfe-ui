http {
    # Upstream configuration for each MFE
    upstream shell_mfe {
        server localhost:9000;
        server localhost:9100;  # Additional instance for load balancing
    }

    upstream login_mfe {
        server localhost:9002;
        server localhost:9102;
    }

    upstream tracking_mfe {
        server localhost:9003;
        server localhost:9103;
    }

    upstream reports_mfe {
        server localhost:9004;
        server localhost:9104;
    }

    upstream admin_mfe {
        server localhost:9005;
        server localhost:9105;
    }

    upstream packages_mfe {
        server localhost:9006;
        server localhost:9106;
    }

    # Nginx server block
    server {
        listen 9000;

        # Proxy to the shell MFE
        location /shell {
            proxy_pass http://shell_mfe;
        }

        # Proxy to the login MFE
        location /login {
            proxy_pass http://login_mfe;
        }

        # Proxy to the tracking MFE
        location /tracking {
            proxy_pass http://tracking_mfe;
        }

        # Proxy to the reports MFE
        location /reports {
            proxy_pass http://reports_mfe;
        }

        # Proxy to the admin MFE
        location /admin {
            proxy_pass http://admin_mfe;
        }

        # Proxy to the packages MFE
        location /packages {
            proxy_pass http://packages_mfe;
        }

        # Additional headers and configurations (if needed)
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
